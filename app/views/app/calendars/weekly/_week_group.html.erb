<% scroll_direction ||= nil %>

<div class="weekly-calendar__week-group"
     data-weekly-calendar-target="weekGroup"
     data-weekly-calendar-scroll-direction="<%= scroll_direction %>">

	<% dates.in_groups_of(7).each_with_index do |week_days, index| %>
		<div class="weekly-calendar__week <%= week_days.include?(Date.current) ? 'weekly-calendar__week--current' : '' %>"
			   data-weekly-calendar-target="week">
			<% week_days.each do |day| %>
				<div class="weekly-calendar__day <%= day == Date.current ? "weekly-calendar__day--today" : '' %>"
					   id="<%= day.strftime('%Y-%m-%d') %>"
					   data-weekly-calendar-target="day"
					   data-calendar-selected-date="<%= day == selected_day %>">

					<%= render "app/calendars/weekly/day", day: day,
					                                       selected_day: selected_day,
					                                       activities: (activities[day.strftime("%Y-%m-%d")].presence || {}) %>

				</div>
			<% end %>

			<div class="weekly-calendar__week-stats"></div>
		</div>
	<% end %>
</div>
